<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>My Events</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="profilePage_events.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap">
</head>
<body>
	<div id="navbar">
        <div id="nav">
            <ul>
                <li id="right-items">
                    <ul>
						<li><a id="userGreeting" href="profilePage.html">Welcome</a></li>
						<script>
						    document.getElementById('userGreeting').textContent = 'Welcome ' + localStorage.getItem('userName');
						</script>
					</ul>
                </li>
            </ul>
        </div> <!-- #nav -->
    </div>
	<div class="flex-container">
		<div id="vertical-navbar">
			<ul>
            	<li><a href="profilePage.html">Home</a></li>
            	<li><a href="search_page.html">Search</a></li>
            	<li><a href="profilePage_events.html">My Events</a></li>
        	</ul>
		</div>
		<div id="events-overview">
			<p id="reg-events">Registered Events</p>
			
    	</div>
    	
    	<script>
	        document.addEventListener('DOMContentLoaded', function () {
	            // Get registered events from local storage
	            let registeredEvents = JSON.parse(localStorage.getItem("registeredEvents") || "[]");

	            // Reference the container div
	            let registeredEventsContainer = document.getElementById('reg-events');
	
	            // Loop through registered events and append HTML to display them
	            registeredEvents.forEach((event, index) => {
	            	console.log(event.event_name);
	            	console.log(event.registrationTime);
	                let eventId = index + 1;
	                let eventHtml = `
	                	<div class="event-element">
		                    <div class="event-info">
		                        <p class="event-id">Event ${eventId}</p>
		                        <p class="event-name">${event.event_name}</p>
		                        <p class="event-location">Location: ${event.event_location}</p>
		                        <p class="event-regTime">Registration Time: ${event.registrationTime}</p>
		                    </div>
		                    <div class="event-QRCode">
		                        <img class="qr-code-img" src="${event.QRCode}" alt="QR Code for Event ${eventId}">
		                    </div>
		                    <div class="event-button">
		                        <button><a href="chatRoom.html">Get Event Chat Room</a></button>
		                    </div>
		                </div>
	                `;
	                registeredEventsContainer.insertAdjacentHTML('beforeend', eventHtml);
	            });
	        });
	    </script>
	</div>
</body>
</html>
